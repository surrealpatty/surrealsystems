<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Surreal Systems - Projects</title>
    <meta name="description" content="Browse projects on Surreal Systems." />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <!-- ✅ ONLY global theme -->
    <link rel="stylesheet" href="/style.css" />

    <style>
      body.dashboard{
        margin:0;
        min-height:100vh;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }

      .profile-wrapper{
        max-width:1100px;
        margin:0 auto;
        padding:24px 16px 40px;
      }

      .profile-header{
        display:flex;
        justify-content:space-between;
        align-items:center;
        margin-bottom:20px;
      }

      .profile-brand{
        display:inline-flex;
        align-items:center;
        gap:0.5rem;
        text-decoration:none;
        font-weight:600;
        font-size:1.1rem;
        color: var(--text);
      }

      .profile-dot{
        width:10px;
        height:10px;
        border-radius:999px;
        background: linear-gradient(135deg, var(--brand-a), var(--brand-b));
      }

      .profile-user-pill{
        display:inline-flex;
        align-items:center;
        gap:0.5rem;
        padding:0.4rem 0.8rem;
        border-radius:999px;
        border:1px solid var(--border);
        font-size:0.85rem;
        background: rgba(15,23,42,0.35);
        color: var(--text);
      }
      :root[data-theme="light"] .profile-user-pill{ background:#ffffff; }

      .profile-avatar{
        width:30px;
        height:30px;
        border-radius:999px;
        background: linear-gradient(135deg, var(--brand-a), var(--brand-b));
        display:flex;
        align-items:center;
        justify-content:center;
        font-weight:600;
        color:#ffffff;
      }

      .profile-layout{
        display:grid;
        grid-template-columns:230px minmax(0,1fr);
        gap:20px;
      }

      @media (max-width:820px){
        .profile-layout{ grid-template-columns:minmax(0,1fr); }
        .profile-user-pill{ display:none; }
      }

      .sidebar{
        border-radius: var(--radius-lg);
        border: 1px solid var(--border);
        background: var(--surface-2);
        padding:14px 12px 16px;
      }
      :root[data-theme="light"] .sidebar{ background: var(--surface); }

      .card{
        border-radius: var(--radius-lg);
        border: 1px solid var(--border);
        background: var(--surface-2);
        padding:18px 16px 20px;
        color: var(--text);
        box-shadow: var(--shadow-1);
      }
      :root[data-theme="light"] .card{ background: var(--surface); }

      .sidebar-title{
        font-size:0.85rem;
        text-transform:uppercase;
        letter-spacing:0.08em;
        margin:0 0 10px;
        color: var(--muted);
      }

      .nav-list{
        list-style:none;
        padding:0;
        margin:0;
        display:flex;
        flex-direction:column;
        gap:6px;
      }

      .nav-link{
        display:block;
        padding:8px 10px;
        border-radius:999px;
        font-size:0.9rem;
        text-decoration:none;
        border:1px solid transparent;
        color: var(--text);
        transition: background 0.15s ease, border-color 0.15s ease;
      }

      .nav-link:hover{
        background: rgba(15,23,42,0.25);
        border-color: var(--border);
      }
      :root[data-theme="light"] .nav-link:hover{ background:#f5f0ff; }

      .nav-link--active{
        background: rgba(124,58,237,0.18);
        border-color: rgba(168,85,247,0.75);
      }

      .nav-link--danger{ color:#fecaca; }
      :root[data-theme="light"] .nav-link--danger{ color:#b91c1c; }

      .content-column{
        display:flex;
        flex-direction:column;
        gap:16px;
      }

      .filters{
        display:flex;
        flex-wrap:wrap;
        gap:10px;
        margin-top:12px;
      }

      .projects-list{
        margin-top:12px;
        display:grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap:12px;
      }

      .project-card{
        border-radius:0.9rem;
        padding:12px 14px;
        border:1px solid var(--border);
        background: rgba(15,23,42,0.35);
      }
      :root[data-theme="light"] .project-card{ background:#ffffff; }

      .project-title{ font-weight:700; margin:0 0 6px; }
      .project-meta{ margin:0; font-size:0.9rem; color: var(--muted); }

      .btn-row{
        display:flex;
        flex-wrap:wrap;
        gap:8px;
        margin-top:12px;
        align-items:center;
      }

      .btn{
        display:inline-flex;
        align-items:center;
        justify-content:center;
        padding:0.55rem 0.95rem;
        border-radius:999px;
        font-size:0.88rem;
        font-weight:600;
        cursor:pointer;
        border:none;
        text-decoration:none;
      }
      .btn-primary{
        background: linear-gradient(135deg, var(--brand-a), var(--brand-b));
        color:#ffffff;
      }
      .btn-muted{
        background: transparent;
        border:1px solid var(--border);
        color: var(--muted);
      }

      .projects-empty{
        margin-top:10px;
        padding:0.65rem 0.75rem;
        border-radius:0.9rem;
        font-size:0.85rem;
        border:1px solid var(--border);
        background: rgba(15,23,42,0.35);
        color: var(--muted);
      }
      :root[data-theme="light"] .projects-empty{ background:#ffffff; }

      .is-hidden{ display:none !important; }

      .profile-footer{
        text-align:center;
        margin-top:18px;
        font-size:0.8rem;
        color: var(--muted);
      }
    </style>
  </head>

  <body class="dashboard projects-page">
    <div class="profile-wrapper">
      <header class="profile-header">
        <a href="index.html" class="profile-brand">
          <span class="profile-dot"></span>
          <span>Surreal Systems</span>
        </a>

        <div class="profile-user-pill">
          <div class="profile-avatar" id="topUserAvatar">U</div>
          <span class="profile-email" id="topUserEmail">User</span>
        </div>
      </header>

      <div class="profile-layout">
        <aside class="sidebar">
          <p class="sidebar-title">Dashboard</p>
          <ul class="nav-list">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="profile.html" class="nav-link">Profile</a></li>

            <!-- ✅ FIX: Capitalized -->
            <li><a href="projects.html" class="nav-link nav-link--active">Projects</a></li>

            <li><a href="messages.html" class="nav-link">Messages</a></li>
            <li><a href="login.html" class="nav-link nav-link--danger">Logout</a></li>
          </ul>
        </aside>

        <main class="content-column">
          <section class="card">
            <h1>Projects</h1>
            <p class="project-meta">Browse projects posted on Surreal Systems.</p>

            <div class="filters">
              <input
                id="projectSearch"
                class="profile-edit-input"
                placeholder="Search projects..."
                aria-label="Search projects"
              />

              <!-- ✅ FIX: accessible name for select -->
              <label for="projectSort">Sort projects</label>
              <select id="projectSort" class="profile-edit-input">
                <option value="newest" selected>Newest</option>
                <option value="oldest">Oldest</option>
                <option value="equityHigh">Equity: High → Low</option>
                <option value="equityLow">Equity: Low → High</option>
              </select>
            </div>

            <div id="projectsStatus" class="projects-empty">Loading projects…</div>

            <!-- ✅ IMPORTANT: must match projects.js -->
            <div id="projectsList" class="projects-list"></div>

            <div class="btn-row">
              <button class="btn btn-primary" id="refreshProjectsBtn" type="button">Refresh</button>
              <a class="btn btn-muted" href="profile.html">Back to Profile</a>
            </div>
          </section>
        </main>
      </div>

      <footer class="profile-footer">
        &copy; 2025 Surreal Systems. All rights reserved.
      </footer>
    </div>

    <script src="/init.js" defer></script>
    <script src="/script.js" defer></script>
    <script src="/projects.js" defer></script>
  </body>
</html>
