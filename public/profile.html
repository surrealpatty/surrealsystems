<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Surreal Systems - Your Profile</title>
    <meta name="description" content="Your Surreal Systems profile." />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <!-- ✅ ONLY global theme -->
    <link rel="stylesheet" href="/style.css" />

    <style>
      /* Layout-only tweaks that won't fight style.css colors */

      body.dashboard{
        margin:0;
        min-height:100vh;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }

      .profile-wrapper{
        max-width:1100px;
        margin:0 auto;
        padding:24px 16px 40px;
      }

      .profile-header{
        display:flex;
        justify-content:space-between;
        align-items:center;
        margin-bottom:20px;
      }

      .profile-brand{
        display:inline-flex;
        align-items:center;
        gap:0.5rem;
        text-decoration:none;
        font-weight:600;
        font-size:1.1rem;
        color: var(--text);
      }

      .profile-dot{
        width:10px;
        height:10px;
        border-radius:999px;
        background: linear-gradient(135deg, var(--brand-a), var(--brand-b));
      }

      .profile-user-pill{
        display:inline-flex;
        align-items:center;
        gap:0.5rem;
        padding:0.4rem 0.8rem;
        border-radius:999px;
        border:1px solid var(--border);
        font-size:0.85rem;
        background: rgba(15,23,42,0.35);
        color: var(--text);
      }
      :root[data-theme="light"] .profile-user-pill{
        background:#ffffff;
      }

      .profile-avatar{
        width:30px;
        height:30px;
        border-radius:999px;
        background: linear-gradient(135deg, var(--brand-a), var(--brand-b));
        display:flex;
        align-items:center;
        justify-content:center;
        font-weight:600;
        color:#ffffff;
      }

      .profile-layout{
        display:grid;
        grid-template-columns:230px minmax(0,1fr);
        gap:20px;
      }

      @media (max-width:820px){
        .profile-layout{ grid-template-columns:minmax(0,1fr); }
        .profile-user-pill{ display:none; }
      }

      /* Use your theme cards */
      .sidebar{
        border-radius: var(--radius-lg);
        border: 1px solid var(--border);
        background: var(--surface-2);
        padding:14px 12px 16px;
      }
      :root[data-theme="light"] .sidebar{ background: var(--surface); }

      .card{
        border-radius: var(--radius-lg);
        border: 1px solid var(--border);
        background: var(--surface-2);
        padding:18px 16px 20px;
        color: var(--text);
        box-shadow: var(--shadow-1);
      }
      :root[data-theme="light"] .card{ background: var(--surface); }

      .sidebar-title{
        font-size:0.85rem;
        text-transform:uppercase;
        letter-spacing:0.08em;
        margin:0 0 10px;
        color: var(--muted);
      }

      .nav-list{
        list-style:none;
        padding:0;
        margin:0;
        display:flex;
        flex-direction:column;
        gap:6px;
      }

      .nav-link{
        display:block;
        padding:8px 10px;
        border-radius:999px;
        font-size:0.9rem;
        text-decoration:none;
        border:1px solid transparent;
        color: var(--text);
        transition: background 0.15s ease, border-color 0.15s ease;
      }

      .nav-link:hover{
        background: rgba(15,23,42,0.25);
        border-color: var(--border);
      }
      :root[data-theme="light"] .nav-link:hover{
        background:#f5f0ff;
      }

      .nav-link--active{
        background: rgba(124,58,237,0.18);
        border-color: rgba(168,85,247,0.75);
      }

      .nav-link--danger{ color:#fecaca; }
      :root[data-theme="light"] .nav-link--danger{ color:#b91c1c; }

      .content-column{
        display:flex;
        flex-direction:column;
        gap:16px;
      }

      .profile-row{ margin-top:8px; margin-bottom:6px; }

      .profile-label{
        font-size:0.78rem;
        text-transform:uppercase;
        letter-spacing:0.06em;
        color: var(--muted);
      }

      .profile-value{
        font-size:0.95rem;
        font-weight:500;
      }

      .profile-row--name .profile-value{
        font-size:1.25rem;
        font-weight:700;
        letter-spacing:-0.01em;
      }

      .btn-row{
        display:flex;
        flex-wrap:wrap;
        gap:8px;
        margin-top:10px;
        align-items:center;
      }

      .btn{
        display:inline-flex;
        align-items:center;
        justify-content:center;
        padding:0.55rem 0.95rem;
        border-radius:999px;
        font-size:0.88rem;
        font-weight:600;
        cursor:pointer;
        border:none;
        text-decoration:none;
      }

      .btn-primary{
        background: linear-gradient(135deg, var(--brand-a), var(--brand-b));
        color:#ffffff;
      }

      .btn-muted{
        background: transparent;
        border:1px solid var(--border);
        color: var(--muted);
      }

      .projects-empty{
        margin-top:6px;
        padding:0.65rem 0.75rem;
        border-radius:0.9rem;
        font-size:0.85rem;
        border:1px solid var(--border);
        background: rgba(15,23,42,0.35);
        color: var(--muted);
      }
      :root[data-theme="light"] .projects-empty{
        background:#ffffff;
      }

      .is-hidden{ display:none !important; }

      .profile-edit,
      .project-panel{
        margin-top:14px;
        padding-top:12px;
        border-top:1px solid var(--border);
        display:flex;
        flex-direction:column;
        gap:12px;
      }

      .profile-edit-row{
        display:flex;
        flex-direction:column;
        gap:6px;
      }

      .profile-edit-input,
      .profile-edit-textarea{
        width:100%;
      }

      /* extra helper text */
      .help-text{
        margin:0;
        font-size:0.82rem;
        color: var(--muted);
      }

      #profileprojectsList{
        margin-top:12px;
        display:grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap:12px;
      }

      .profile-project-card,
      .settings-item{
        border-radius:0.9rem;
        padding:10px 12px;
        font-size:0.9rem;
        border:1px solid var(--border);
        background: rgba(15,23,42,0.35);
      }
      :root[data-theme="light"] .profile-project-card,
      :root[data-theme="light"] .settings-item{
        background:#ffffff;
      }

      .profile-project-title{ font-weight:600; margin-bottom:4px; }
      .profile-project-meta{ font-size:0.83rem; color: var(--muted); }

      .settings-subtitle{
        margin:0 0 12px;
        font-size:0.9rem;
        color: var(--muted);
      }

      .settings-grid{
        display:grid;
        grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
        gap:12px;
        margin-top:8px;
      }

      .settings-item h3{ margin:0 0 4px; font-size:0.95rem; }
      .settings-item p{ margin:0 0 8px; font-size:0.85rem; color: var(--muted); }

      .settings-item.danger h3{ color: var(--danger); }

      .switch{
        position:relative;
        display:inline-block;
        width:40px;
        height:22px;
      }
      .switch input{
        opacity:0;
        width:0;
        height:0;
      }
      .slider{
        position:absolute;
        cursor:pointer;
        inset:0;
        background-color: rgba(148,163,184,0.35);
        transition:0.2s;
        border-radius:999px;
        border:1px solid var(--border);
      }
      .slider:before{
        position:absolute;
        content:"";
        height:16px;
        width:16px;
        left:3px;
        bottom:3px;
        background-color:#f9fafb;
        transition:0.2s;
        border-radius:50%;
      }
      .switch input:checked + .slider{
        background: linear-gradient(135deg, var(--brand-a), var(--brand-b));
        border-color: transparent;
      }
      .switch input:checked + .slider:before{
        transform: translateX(16px);
      }

      .theme-toggle-wrapper{
        margin-left:auto;
        display:inline-flex;
        align-items:center;
        gap:8px;
      }
      .theme-toggle-label{
        font-size:0.8rem;
        color: var(--muted);
      }

      #deleteAccountBtn{
        background: transparent !important;
        color: var(--danger) !important;
        border: 2px solid var(--danger) !important;
        font-weight: 600;
      }
      #deleteAccountBtn:hover{
        background: rgba(255,77,79,0.12) !important;
        box-shadow: 0 0 8px rgba(255,77,79,0.35);
      }
      #deleteAccountBtn:active{
        background: rgba(255,77,79,0.25) !important;
        color:#ffffff !important;
      }

      .profile-footer{
        text-align:center;
        margin-top:18px;
        font-size:0.8rem;
        color: var(--muted);
      }
    </style>
  </head>

  <body class="dashboard profile-page profile-dark">
    <div class="profile-wrapper">
      <header class="profile-header">
        <a href="index.html" class="profile-brand">
          <span class="profile-dot"></span>
          <span>Surreal Systems</span>
        </a>

        <div class="profile-user-pill" id="topUserChip">
          <div class="profile-avatar" id="topUserAvatar">Q</div>
          <span class="profile-email" id="topUserEmail">you@example.com</span>
        </div>
      </header>

      <div class="profile-layout">
        <aside class="sidebar">
          <p class="sidebar-title">Dashboard</p>
          <ul class="nav-list">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="profile.html" class="nav-link nav-link--active">Profile</a></li>
            <li><a href="projects.html" class="nav-link">Projects</a></li>
            <li><a href="messages.html" class="nav-link">Messages</a></li>
            <li><a href="login.html" class="nav-link nav-link--danger">Logout</a></li>
          </ul>
        </aside>

        <main class="content-column">
          <section class="card">
            <div id="profileView">
              <div class="profile-row profile-row--name">
                <div class="profile-label">Display name</div>
                <div class="profile-value" id="profileName">New developer</div>
              </div>

              <div class="profile-row">
                <div class="profile-label">Email</div>
                <div class="profile-value" id="profileEmailMain">you@example.com</div>
              </div>

              <div class="profile-row">
                <div class="profile-label">Description</div>
                <div class="profile-value" id="profileDescription">
                  Write a short bio so clients know what you do.
                </div>
              </div>

              <div class="profile-row">
                <div class="profile-label">Account type</div>
                <div class="profile-value">Free user</div>
              </div>

              <div class="btn-row">
                <button type="button" class="btn btn-primary" id="editProfileBtn">
                  Edit Profile
                </button>

                <div class="theme-toggle-wrapper">
                  <span class="theme-toggle-label">Light mode</span>
                  <label class="switch" aria-label="Toggle dark / light theme">
                    <input type="checkbox" id="themeToggle" />
                    <span class="slider"></span>
                  </label>
                </div>
              </div>
            </div>

            <form id="profileEditForm" class="profile-edit is-hidden">
              <div class="profile-edit-row">
                <label for="editDisplayName" class="profile-label">Display name</label>
                <input type="text" id="editDisplayName" class="profile-edit-input" maxlength="64" />
              </div>

              <div class="profile-edit-row">
                <label for="editEmail" class="profile-label">Email</label>
                <input type="email" id="editEmail" class="profile-edit-input" required />
              </div>

              <div class="profile-edit-row">
                <label for="editDescription" class="profile-label">Description</label>
                <textarea id="editDescription" class="profile-edit-textarea" rows="4"></textarea>
                <p class="settings-subtitle">This appears on your public profile. Keep it short and clear.</p>
              </div>

              <div class="btn-row">
                <button type="submit" class="btn btn-primary">Save changes</button>
                <button type="button" class="btn btn-muted" id="cancelEditBtn">Cancel</button>
              </div>
            </form>
          </section>

          <section class="card card-settings is-hidden" id="accountSettingsCard">
            <h2>Account settings</h2>
            <p class="settings-subtitle">Manage your account preferences and security.</p>

            <div class="settings-grid">
              <div class="settings-item">
                <h3>Change password</h3>
                <p>Update your password to keep your account secure.</p>
                <button type="button" class="btn btn-muted" id="changePasswordBtn">Change password</button>
              </div>

              <div class="settings-item">
                <h3>Email notifications</h3>
                <p>Allow Surreal Systems to email you about new messages and updates.</p>
                <label class="switch" aria-label="Email notifications">
                  <input type="checkbox" id="emailNotificationsToggle" />
                  <span class="slider"></span>
                </label>
              </div>

              <div class="settings-item danger">
                <h3>Delete account</h3>
                <p>This will permanently delete your account and all data.</p>
                <button type="button" class="btn btn-muted" id="deleteAccountBtn">Delete account</button>
              </div>
            </div>
          </section>

          <section class="card">
            <h2>Your Projects</h2>
            <p class="settings-subtitle">Once you start posting, your projects will appear here.</p>

            <div id="profileprojectsEmpty" class="projects-empty">
              You don’t have any projects yet. Create one to start attracting clients.
            </div>

            <div id="profileprojectsList"></div>

            <div class="btn-row">
              <button type="button" class="btn btn-primary" id="createprojectBtn">
                Create Project
              </button>
            </div>

            <!-- ✅ UPDATED FORM FIELDS -->
            <form id="createprojectForm" class="project-panel is-hidden">
              <div class="profile-edit-row">
                <label for="projectTitle" class="profile-label">Title</label>
                <input
                  type="text"
                  id="projectTitle"
                  class="profile-edit-input"
                  maxlength="100"
                  placeholder="Project title"
                  required
                />
              </div>

              <div class="profile-edit-row">
                <label for="projectDescription" class="profile-label">Description of the project</label>
                <textarea
                  id="projectDescription"
                  class="profile-edit-textarea"
                  rows="4"
                  placeholder="What is the project? What problem does it solve?"
                  required
                ></textarea>
              </div>

              <div class="profile-edit-row">
                <label for="projectNeeds" class="profile-label">What the project needs</label>
                <textarea
                  id="projectNeeds"
                  class="profile-edit-textarea"
                  rows="4"
                  placeholder="Example: funding, developers, marketing, design, mentorship..."
                  required
                ></textarea>
              </div>

              <div class="profile-edit-row">
                <label for="projectEquity" class="profile-label">Percentage of company up for offer</label>
                <input
                  type="number"
                  id="projectEquity"
                  class="profile-edit-input"
                  min="0.5"
                  max="99.5"
                  step="0.5"
                  placeholder="0.5 to 99.5"
                  required
                />
                <p class="help-text">Allowed: 0.5% to 99.5% (steps of 0.5)</p>
              </div>

              <div class="btn-row">
                <button type="submit" class="btn btn-primary">Save project</button>
                <button type="button" class="btn btn-muted" id="cancelCreateprojectBtn">Cancel</button>
              </div>
            </form>
          </section>
        </main>
      </div>

      <footer class="profile-footer">
        &copy; 2025 Surreal Systems. All rights reserved.
      </footer>
    </div>

    <!-- ✅ absolute paths so Render always finds them -->
    <script src="/init.js" defer></script>
    <script src="/script.js" defer></script>
    <script src="/profile.js" defer></script>

    <script>
      setTimeout(function () {
        var nameEl = document.getElementById("profileName");
        var chipLabel = document.getElementById("topUserEmail");
        var chipAvatar = document.getElementById("topUserAvatar");

        if (!nameEl || !chipLabel || !chipAvatar) return;

        var txt = (nameEl.textContent || "").trim();
        if (!txt || txt === "New developer") return;

        chipLabel.textContent = txt;
        chipAvatar.textContent = txt[0].toUpperCase();
      }, 1000);
    </script>
  </body>
</html>
